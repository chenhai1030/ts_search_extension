!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((e=e||{}).type=(e.type||"GET").toUpperCase(),e.dataType=e.dataType||"json","POST"==e.type)var t=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(e.data);if(window.XMLHttpRequest)var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){var t=n.status;t>=200&&t<300?e.success&&e.success(n.responseText,n.responseXML):e.fail&&e.fail(t)}},"GET"==e.type?(n.open("GET",e.url+"?q="+e.data,!0),n.send(null)):"POST"==e.type&&(n.open("POST",e.url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);let a,d,l=0,i=0;function r(){document.removeEventListener("mouseup",r),document.removeEventListener("mousemove",u)}function u(e){document.getElementById("FuntvGalleryHelper");l+=e.clientX-a,i+=e.clientY-d,a=e.clientX,d=e.clientY}function s(){let e=document.getElementById("FuntvModalDiv");e&&document.body.removeChild(e);let t=document.getElementById("FuntvGalleryHelper");t&&document.documentElement.removeChild(t)}function c(){let e=document.getElementById("FuntvModalDiv");e.style.display="none",e.style.zIndex="-1"}function m(e){27==e.keyCode&&c()}function f(e){var t=new Image;t.crossOrigin="",t.src=e,t.onload=function(){let n=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height);var n=e.src.substring(e.src.lastIndexOf(".")+1).toLowerCase();return t.toDataURL("image/"+n)}(t),a=document.getElementsByTagName("iframe");for(let e=0;e<a.length;e++)if("/admin/refine_task"==a[e].dataset.src)var d=document.getElementsByTagName("iframe")[e];let l=d.contentWindow.document.getElementsByClassName("img-still mod-editpic"),i=l[0].childNodes[2],r=l[0].attributes[6].nodeValue;let u={filetype:e.substring(e.lastIndexOf(".")+1),image:n.substring(n.lastIndexOf(",")+1)};o.default({type:"POST",url:"/ajaxa/post/upload_pic",data:u,success:function(e){console.info(e);var t=null;try{t=JSON.parse(e)}catch(e){}!function(e,t){let n={id:e,still:t};o.default({type:"POST",url:"/ajaxa/post/save_still",data:n,success:function(e){}})}(r,t.data.url),i.src=t.data.url}})}}!function(){!function(){let e=document.getElementById("FuntvModalDiv");e||(e=document.createElement("div"),e.id="FuntvModalDiv",e.classList.add("FuntvModalDiv"),e.tabIndex=-1,e.addEventListener("keyup",m),document.body.appendChild(e)),e&&(e.innerHTML='<div id="detailMeta">                                 <div id="img-caption"></div>                                 <div id="imagemeta">                                     <div id="msz"></div>                                </div>                             </div>',e.innerHTML+='<span id="FuntvModalClose">Ã—</span><img id="funtv-modal-content">',document.getElementById("FuntvModalClose").addEventListener("click",c))}();let e=document.getElementById("FuntvGalleryHelper");e?s():(e=document.createElement("iframe"),e.id="FuntvGalleryHelper",e.scrolling="auto",e.src=chrome.extension.getURL("helper.html"),e.classList.add("st-inspector"),document.documentElement.appendChild(e),window.addEventListener("message",(function(e){const t=e.data;switch(t.cmd){case"reinitIframe":n=e.data.data,document.getElementById("FuntvGalleryHelper").height=n;break;case"resizeIframe":!function(e,t){let n=document.getElementById("FuntvGalleryHelper");n.width=e+20+"px",n.height=t+20+"px"}(t.width,t.height);break;case"removeInjected":s();break;case"preview":!function(e,t){let n=document.getElementById("FuntvModalDiv");document.getElementById("funtv-modal-content").src=e,console.info(e),document.getElementById("img-caption").innerHTML=e.substring(e.lastIndexOf("/")+1),document.getElementById("msz").innerHTML=t,n&&(n.style.display="block",n.style.zIndex="999",n.style.outline="none",n.focus())}(t.src,t.msz);break;case"exchange":f(e.data.data);break;case"SALADICT_DRAG_START":!function(e,t){let n=document.getElementById("FuntvGalleryHelper");l=n.offsetTop,i=n.offsetLeft,a=e,d=t,document.addEventListener("mouseup",r),document.addEventListener("mousemove",u)}(t.mouseX,t.mouseY);break;case"SALADICT_DRAG_MOUSEMOVE":!function(e,t){let n=document.getElementById("FuntvGalleryHelper");l+=t,i+=e,n.style.top=l+"px",n.style.left=i+"px",a+=e,d+=t}(t.offsetX,t.offsetY);break;case"SALADICT_DRAG_END":r()}var n}),!1))}()}]);